(function() {
  // Simulated data for demonstration purposes
  let ratings = {};

  // Function to initialize the rating widget
  function initRatingWidget() {
    const stars = document.querySelectorAll('.stars-svg');
    stars.forEach((star, index) => {
      star.addEventListener('click', () => {
        rate(index + 1);
      });
      star.addEventListener('mouseover', () => {
        highlightStars(index + 1);
      });
      star.addEventListener('mouseout', () => {
        clearHighlight();
      });
    });
  }

  function rate(rating) {
    // Save the rating
    console.log('Rating submitted:', rating);
    document.querySelector('.rating-result').setAttribute('aria-label', `You rated ${rating} stars`);
    document.querySelector('.rating-submitted').style.display = 'block';
    // Here you would also send the rating to your server
  }

  function highlightStars(count) {
    const stars = document.querySelectorAll('.stars-svg');
    stars.forEach((star, index) => {
      if (index < count) {
        star.classList.add('active');
      }
    });
  }

  function clearHighlight() {
    document.querySelectorAll('.stars-svg').forEach(star => star.classList.remove('active'));
  }

  // Initialize the widget when the script loads
  document.addEventListener('DOMContentLoaded', initRatingWidget);
})();
